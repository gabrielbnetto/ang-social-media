<app-header-toolbar></app-header-toolbar>
<div class="container">
    <h1 class="text-center">Perfil</h1>
    <div class="profile-box border border-secondary">
        <h2 class="postTitle">Dados</h2>
        <div *ngIf="!isMyProfile && !alreadyRecommended">
          <button type="submit" (click)="recomendar()" class="btn btn-primary recomendar">
            <mat-icon>thumb_up</mat-icon> Recomendar
          </button>
        </div>
        <div *ngIf="!isMyProfile && alreadyRecommended">
          <button type="submit" (click)="deletarRecomendacao()" class="btn btn-primary recomendar">
            <mat-icon>thumb_down</mat-icon> Retirar recomendação
          </button>
        </div>
        <div *ngIf="recommendationLength === 1">
          <p class="btn btn-primary recomendacoes" >{{ recommendationLength }} Recomendação</p>
        </div>
        <div *ngIf="recommendationLength === 0 || recommendationLength > 1">
          <p class="btn btn-primary recomendacoes" >{{ recommendationLength }} Recomendações</p>
        </div>
        <div *ngIf="!isMyProfile">
          <button *ngIf="amizade === 4" type="submit" (click)="adicionarAmizade()" class="btn btn-primary conectar">
            <mat-icon>person_add</mat-icon> Conectar
          </button>
          <button *ngIf="amizade === 3" type="submit" (click)="aceitarAmizade()" class="btn btn-primary conectar">
            <mat-icon>person_add</mat-icon> Aceitar Amizade
          </button>
          <button *ngIf="amizade === 3" type="submit" (click)="rejeitarPedidoAmizade()" class="btn btn-primary buttonsNoIcons">
            Recusar Solicitação
          </button>
          <button *ngIf="amizade === 2" type="submit" (click)="cancelarSolicitacaoAmizade()" class="btn btn-primary buttonsNoIcons">
            Cancelar Solicitação
          </button>
          <button *ngIf="amizade === 1" type="submit" (click)="desfazerAmizade()" class="btn btn-primary buttonsNoIcons">
            Desfazer Amizade
          </button>
        </div>
        <hr>
        <div>
            <img *ngIf="usuario.profileImage" [src]="usuario.profileImage" class="imgPerson rounded" alt="...">
            <img *ngIf="!usuario.profileImage" src="http://agbrands.com.br/wp-content/uploads/2017/01/perfil.jpg" class="imgPerson rounded" alt="...">
            <div class="row">
                <div class="info1">
                    <p>Nome: {{usuario?.name}}</p>
                    <p>Data de Nascimento: {{usuario?.birthDate}}</p>
                    <p>Cidade: {{usuario?.city}}</p>
                    <p>Estado: {{usuario?.state}}</p>
                </div>
                <div class="info2">
                    <p>Empresa: {{usuario?.jobRole?.companyName}}</p>
                    <p>Salário: {{usuario.jobRole?.salary | currency:'BRL':true}}</p>
                    <p>Data de Inicío na Área de Ciência de Dados: {{usuario?.careerDate}}</p>
                    <p>Nivel de Instrução: {{usuario?.instructionLevel}}</p>
                </div>
            </div>
            <div *ngIf="isMyProfile">
                <button type="submit" class="btn btn-primary" routerLink="/atualizarperfil">
                <mat-icon>person</mat-icon>
                Atualizar Perfil</button>
            </div>
        </div>
      
        <div class="pt-5">
        <div *ngIf="!isMyProfile && !alreadyRecommended">
          <button type="submit" (click)="recomendar()" class="btn btn-primary recomendar">
            <mat-icon>thumb_up</mat-icon> Recomendar
          </button>
        </div>
        <div *ngIf="!isMyProfile && alreadyRecommended">
          <button type="submit" (click)="deletarRecomendacao()" class="btn btn-primary recomendar">
            <mat-icon>thumb_down</mat-icon> Retirar recomendação
          </button>
        </div>
        <div>
          <p class="btn btn-primary recomendacoes">{{ recommendationLength }} Recomendação</p>
        </div>
        </div>
        <hr>
        <div class="Topic">
            <p class="d-flex justify-content-center"><b>Tópicos de Interesse</b></p>
            <div class="d-flex justify-content-around topicos">
                <div *ngFor='let topico of topics'>
                    {{topico}}
                </div>
                <div *ngIf="topics.length == 0">
                    <p>Ainda não cadastrou interesse por nenhum tópico!</p>
                </div>
            </div>
        </div>
    </div>
    <div class="pt-2">
        <h1 class="text-center">Postagens</h1>
        <div *ngIf="isMyProfile">
          <form #ngForm="ngForm" (ngSubmit)="onSubmit()">
            <textarea class="form-control postagem" id="text" #text="ngModel" name="text" [(ngModel)]="publication.text" placeholder="Digite aqui o que deseja postar!"></textarea>
            <div class="form-group mr-2 form-inline">
              <label for="videoUrl" class="mr-2">Adicione a Url do vídeo aqui (opcional):</label>
              <input type="text" class="form-control video" id="videoUrl" #videoUrl="ngModel" name="videoUrl" [(ngModel)]="publication.videoUrl" placeholder="Inserir a Url inteira - https://youtube.com.br/ex/2jiwij3">
              <button type="submit" class="btn btn-primary button-postar" mat-button>Postar</button>
            </div>
          </form>
          <div *ngIf="showSpinner" class="d-flex justify-content-center mt-2">
            <mat-spinner></mat-spinner>
          </div>
        </div>
    </div>
    <hr>
    <div *ngFor='let publication of userPublications'>
      <app-card-publication [publication]="publication" (clickedDeletPublication)='deletePublication($event)' [isMyProfile]="isMyProfile" [professionalLike]="userLoggedId"></app-card-publication>
    </div>
    <div *ngIf="userPublications.length == 0" class="text-center">
      <p>Ainda não há postagens!</p>
    </div>
</div>
